# ========================================
# PronoTurf - Configuration principale
# Copiez ce fichier en .env et personnalisez les valeurs
# ========================================

# -------- Application --------
ENVIRONMENT=production
DEBUG=false
APP_NAME=PronoTurf
APP_VERSION=0.1.0
API_V1_PREFIX=/api/v1

# -------- Sécurité --------
SECRET_KEY=change-me-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# -------- Base de données MySQL --------
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_ROOT_PASSWORD=change-this-root-password
MYSQL_DATABASE=pronoturf
MYSQL_USER=pronoturf_user
MYSQL_PASSWORD=change-this-password
# URL complète utilisée par FastAPI/Celery (aiomysql pour async)
DATABASE_URL=mysql+aiomysql://${MYSQL_USER}:${MYSQL_PASSWORD}@${MYSQL_HOST}:${MYSQL_PORT}/${MYSQL_DATABASE}
# URL compatible avec outils de scripts synchrones (pymysql)
SYNC_DATABASE_URL=mysql+pymysql://${MYSQL_USER}:${MYSQL_PASSWORD}@${MYSQL_HOST}:${MYSQL_PORT}/${MYSQL_DATABASE}

# -------- Redis / Celery --------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}

# -------- CORS --------
CORS_ORIGINS=http://localhost:3000,http://localhost:8501,https://app.pronoturf.ai

# -------- APIs externes --------
ASPITURF_API_KEY=
ASPITURF_API_URL=https://api.aspiturf.com
ASPITURF_ENABLED=true

TURFINFO_OFFLINE_URL=https://offline.turfinfo.api.pmu.fr/rest/client/7
TURFINFO_ONLINE_URL=https://online.turfinfo.api.pmu.fr/rest/client/61
TURFINFO_ENABLED=true

OPENPMU_API_URL=https://open-pmu-api.vercel.app/api
OPENPMU_ENABLED=true

OPENMETEO_API_URL=https://api.open-meteo.com/v1/forecast

# -------- Notifications --------
TELEGRAM_BOT_TOKEN=
TELEGRAM_ENABLED=false

SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@pronoturf.ai
EMAIL_ENABLED=false
FRONTEND_URL=https://app.pronoturf.ai
SERVE_FRONTEND=true
# Laisser vide pour autodétection (../frontend/dist) ou préciser un chemin absolu/relatif
FRONTEND_DIST_PATH=./frontend/dist

# -------- Journalisation --------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log

# -------- Monitoring / Sentry --------
SENTRY_DSN=
SENTRY_ENVIRONMENT=production
SENTRY_ENABLED=false

# -------- Machine Learning --------
ML_MODELS_PATH=/app/ml_models
ML_MODEL_PATH=/app/ml_models/horse_racing_model.pkl
ML_MODEL_VERSION=v1
ML_RETRAIN_SCHEDULE=0 2 * * 1
TASK_SYNC_PROGRAMME_SCHEDULE=0 6 * * *
TASK_GENERATE_PRONOSTICS_SCHEDULE=0 7 * * *
TASK_CHECK_RESULTS_SCHEDULE=0 12-23 * * *

# -------- Limitations / Pagination --------
RATE_LIMIT_PER_MINUTE=120
RATE_LIMIT_PER_HOUR=2000
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# -------- Divers --------
MAX_UPLOAD_SIZE_MB=5
ALLOWED_UPLOAD_EXTENSIONS=jpg,jpeg,png,gif
